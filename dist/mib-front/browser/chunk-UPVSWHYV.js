import{a as re}from"./chunk-XFPBWLV3.js";import{a as le}from"./chunk-6W6ZYXC2.js";import{b as H,c as f,d as J,e as K,h as Q,i as U,j as W,k as X,l as Y,m as Z,n as ee,o as te,p as ne,r as ie}from"./chunk-H6VHFWHS.js";import"./chunk-5XHJ4X6E.js";import{C as L,Da as r,Fa as k,G as A,L as E,La as v,Ma as $,Na as G,Q as M,R as y,Xa as P,Ya as R,Za as x,_a as B,a as w,ab as z,b as D,ba as m,ca as I,ja as d,la as u,mb as T,pa as l,qa as i,ra as p,sa as q,ta as j,va as O,wa as V}from"./chunk-TI73ILXT.js";var g=n=>({"is-invalid":n});function ue(n,t){n&1&&(l(0,"div",21),r(1," El nombre es obligatorio "),i())}function de(n,t){n&1&&(l(0,"div",21),r(1," El primer apellido es obligatorio "),i())}function se(n,t){n&1&&(l(0,"div",21),r(1," El email es obligatorio "),i())}function ce(n,t){n&1&&(l(0,"div",21),r(1," Formato incorrecto "),i())}function pe(n,t){if(n&1&&(l(0,"option",26),r(1),i()),n&2){let s=t.$implicit;u("value",s.id),m(),k("",s.alias," ")}}function fe(n,t){n&1&&(l(0,"div",21),r(1," El entrenador es obligatorio "),i())}function ve(n,t){if(n&1&&(q(0),l(1,"div",5)(2,"label",22),r(3,"Entrenador"),i(),l(4,"select",23)(5,"option",24),r(6,"Selecciona un entrenador"),i(),d(7,pe,2,2,"option",25),i(),d(8,fe,2,0,"div",8),i(),j()),n&2){let s,o,a=t.ngIf,e=V();m(4),u("ngClass",v(3,g,(e.clientForm==null||(s=e.clientForm.get("trainer"))==null?null:s.invalid)&&(e.clientForm==null||(s=e.clientForm.get("trainer"))==null?null:s.touched))),m(3),u("ngForOf",a.data),m(),u("ngIf",(e.clientForm==null||(o=e.clientForm.get("trainer"))==null?null:o.invalid)&&(e.clientForm==null||(o=e.clientForm.get("trainer"))==null?null:o.touched))}}var ae=(()=>{let t=class t{constructor(o,a,e){this.fb=o,this.clientsService=a,this.alertService=e,this.trainers$=this.clientsService.getTrainers(),this.trainers=[],this.clientForm=this.fb.group({name:[null,f.required],firstLastName:[null,f.required],secondLastName:[null],email:[null,[f.email,f.required]],phoneNumber:[null,f.pattern("^\\d{9}$")],birthDate:[null],trainer:[null,f.required]}),this.trainers$.pipe(L()).subscribe(c=>{this.trainers=c.data})}onSubmit(){if(this.isFormInvalid())return;let o=this.prepareFormData();this.createClient(o)}isFormInvalid(){return this.clientForm.invalid?(this.clientForm.markAllAsTouched(),!0):!1}prepareFormData(){let o=this.clientForm?.get("trainer")?.value,a=this.trainers?.find(e=>Number(e.id)===Number(o));return D(w({},this.clientForm.getRawValue()),{trainer:a})}createClient(o){this.clientsService.createClient(o).pipe(L(),A(a=>this.alertService.show(a.message,"success"))).subscribe()}};t.\u0275fac=function(a){return new(a||t)(I(ne),I(le),I(re))},t.\u0275cmp=M({type:t,selectors:[["app-create-clients"]],decls:41,vars:20,consts:[[1,"container","mt-3"],[2,"height","85vh","overflow-y","auto","overflow-x","hidden"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-md-6","mb-3"],["for","name",1,"form-label","asterisk"],["type","text","id","name","formControlName","name","required","","placeholder","Introduce el nombre",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["for","firstLastName",1,"form-label","asterisk"],["type","text","id","firstLastName","formControlName","firstLastName","required","","placeholder","Introduce el primer apellido",1,"form-control",3,"ngClass"],["for","secondLastName",1,"form-label"],["type","text","id","secondLastName","formControlName","secondLastName","placeholder","Introduce el segundo apellido",1,"form-control"],["for","email",1,"form-label","asterisk"],["type","email","id","email","formControlName","email","required","","placeholder","Introduce el email",1,"form-control",3,"ngClass"],["for","phoneNumber",1,"form-label"],["type","number","id","phoneNumber","formControlName","phoneNumber","placeholder","Introduce el n\xFAmero de tel\xE9fono",1,"form-control",3,"ngClass"],["for","birthDate",1,"form-label"],["type","date","id","birthDate","formControlName","birthDate","placeholder","Introduce la fecha de nacimiento",1,"form-control"],[4,"ngIf"],["type","submit",1,"btn","btn-primary","float-end"],[1,"text-danger"],["for","trainer",1,"form-label","asterisk"],["id","trainer","formControlName","trainer",1,"form-select",3,"ngClass"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,e){if(a&1&&(l(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Crear cliente"),i(),l(4,"form",3),O("ngSubmit",function(){return e.onSubmit()}),l(5,"div",4)(6,"div",5)(7,"label",6),r(8,"Nombre"),i(),p(9,"input",7),d(10,ue,2,0,"div",8),i()(),l(11,"div",4)(12,"div",5)(13,"label",9),r(14,"Primer apellido"),i(),p(15,"input",10),d(16,de,2,0,"div",8),i(),l(17,"div",5)(18,"label",11),r(19,"Segundo apellido"),i(),p(20,"input",12),i()(),l(21,"div",4)(22,"div",5)(23,"label",13),r(24,"Email"),i(),p(25,"input",14),d(26,se,2,0,"div",8),i(),l(27,"div",5)(28,"label",15),r(29,"N\xFAmero de tel\xE9fono"),i(),p(30,"input",16),d(31,ce,2,0,"div",8),i()(),l(32,"div",4)(33,"div",5)(34,"label",17),r(35,"Fecha de nacimiento"),i(),p(36,"input",18),i(),d(37,ve,9,5,"ng-container",19),$(38,"async"),i(),l(39,"button",20),r(40,"Crear"),i()()()()),a&2){let c,h,F,C,b,_,N,S;m(4),u("formGroup",e.clientForm),m(5),u("ngClass",v(12,g,(e.clientForm==null||(c=e.clientForm.get("name"))==null?null:c.invalid)&&(e.clientForm==null||(c=e.clientForm.get("name"))==null?null:c.touched))),m(),u("ngIf",(e.clientForm==null||(h=e.clientForm.get("name"))==null?null:h.invalid)&&(e.clientForm==null||(h=e.clientForm.get("name"))==null?null:h.touched)),m(5),u("ngClass",v(14,g,(e.clientForm==null||(F=e.clientForm.get("firstLastName"))==null?null:F.invalid)&&(e.clientForm==null||(F=e.clientForm.get("firstLastName"))==null?null:F.touched))),m(),u("ngIf",(e.clientForm==null||(C=e.clientForm.get("firstLastName"))==null?null:C.invalid)&&(e.clientForm==null||(C=e.clientForm.get("firstLastName"))==null?null:C.touched)),m(9),u("ngClass",v(16,g,(e.clientForm==null||(b=e.clientForm.get("email"))==null?null:b.invalid)&&(e.clientForm==null||(b=e.clientForm.get("email"))==null?null:b.touched))),m(),u("ngIf",(e.clientForm==null||(_=e.clientForm.get("email"))==null?null:_.invalid)&&(e.clientForm==null||(_=e.clientForm.get("email"))==null?null:_.touched)),m(4),u("ngClass",v(18,g,(e.clientForm==null||(N=e.clientForm.get("phoneNumber"))==null?null:N.invalid)&&(e.clientForm==null||(N=e.clientForm.get("phoneNumber"))==null?null:N.touched))),m(),u("ngIf",(e.clientForm==null||(S=e.clientForm.get("phoneNumber"))==null?null:S.invalid)&&(e.clientForm==null||(S=e.clientForm.get("phoneNumber"))==null?null:S.touched)),m(6),u("ngIf",G(38,10,e.trainers$))}},dependencies:[P,R,x,Q,Z,ee,H,U,Y,J,K,te,W,X,B],styles:["button[_ngcontent-%COMP%]{width:100%;background-color:#39d1ac;border:none}@media (min-width: 768px){button[_ngcontent-%COMP%]{width:200px}}"]});let n=t;return n})();var ge=[{path:"",component:ae}],me=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=y({type:t}),t.\u0275inj=E({imports:[T.forChild(ge),T]});let n=t;return n})();var qe=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=y({type:t}),t.\u0275inj=E({imports:[z,ie,me]});let n=t;return n})();export{qe as CreateClientsModule};
