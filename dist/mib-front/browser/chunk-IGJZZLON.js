import{a as ae}from"./chunk-XFPBWLV3.js";import{a as oe}from"./chunk-6W6ZYXC2.js";import{b as U,c as f,d as W,e as X,h as Y,j as Z,k as x,l as ee,m as te,n as ie,o as ne,p as le,r as re}from"./chunk-H6VHFWHS.js";import"./chunk-5XHJ4X6E.js";import{C as I,Da as o,E as V,Fa as R,G as j,L as y,La as v,Ma as $,Na as P,Q as A,R as D,Sa as G,Xa as B,Ya as z,Za as H,_a as J,a as M,ab as K,b as w,ba as m,ca as g,ib as Q,ja as c,la as u,mb as F,o as T,pa as r,qa as n,ra as p,sa as O,ta as q,va as k}from"./chunk-TI73ILXT.js";var L=i=>({"is-invalid":i});function se(i,t){i&1&&(r(0,"div",21),o(1," El nombre es obligatorio "),n())}function ce(i,t){i&1&&(r(0,"div",21),o(1," El primer apellido es obligatorio "),n())}function pe(i,t){i&1&&(r(0,"div",21),o(1," El email es obligatorio "),n())}function fe(i,t){i&1&&(r(0,"div",21),o(1," Formato incorrecto "),n())}function he(i,t){if(i&1&&(r(0,"option",26),o(1),n()),i&2){let b=t.$implicit;u("value",b.id),m(),R("",b.alias," ")}}function ge(i,t){if(i&1&&(O(0),r(1,"div",5)(2,"label",22),o(3,"Entrenador"),n(),r(4,"select",23)(5,"option",24),o(6,"Selecciona un entrenador"),n(),c(7,he,2,2,"option",25),n()(),q()),i&2){let b=t.ngIf;m(7),u("ngForOf",b.data)}}var ue=(()=>{let t=class t{constructor(l,a,e,s,h){this.clientsService=l,this.route=a,this.fb=e,this.cdr=s,this.alertService=h,this.trainers$=this.clientsService.getTrainers(),this.trainers=[],this.clientId=null,this.client$=this.route.paramMap.pipe(V(d=>(this.clientId=d.get("id"),this.clientId!==null?(console.log("Client ID:",this.clientId),this.clientsService.getClientById(+this.clientId)):T(null)))),this.clientForm=this.fb.group({name:[null,f.required],firstLastName:[null,f.required],secondLastName:[null],email:[null,[f.required,f.email]],phoneNumber:[null,f.pattern("^\\d{9}$")],birthDate:[null],trainer:[null,f.required]}),this.trainers$.pipe(I()).subscribe(d=>{this.trainers=d.data})}ngOnInit(){this.setClientForm()}setClientForm(){this.client$.pipe(I()).subscribe(l=>{l&&this.patchFormValues(l.data.client)})}patchFormValues(l){this.clientForm.patchValue(l),this.clientForm.get("phoneNumber")?.setValue(Number(l.phoneNumber)),this.clientForm.get("trainer")?.setValue(l.trainer?.id),this.cdr.detectChanges()}onSubmit(){if(this.isFormInvalid())return;let l=this.prepareFormData();this.updateClient(l)}isFormInvalid(){return this.clientForm.invalid?(this.clientForm.markAllAsTouched(),!0):!1}prepareFormData(){let l=this.clientForm?.get("trainer")?.value,a=this.trainers?.find(e=>Number(e.id)===Number(l));return w(M({},this.clientForm.getRawValue()),{trainer:a})}updateClient(l){this.clientsService.updateClient(Number(this.clientId),l).pipe(I(),j(a=>this.alertService.show(a.message,"success"))).subscribe()}};t.\u0275fac=function(a){return new(a||t)(g(oe),g(Q),g(le),g(G),g(ae))},t.\u0275cmp=A({type:t,selectors:[["app-edit-client"]],decls:41,vars:20,consts:[[1,"container","mt-3"],[2,"height","85vh","overflow-y","auto","overflow-x","hidden"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-md-6","mb-3"],["for","name",1,"form-label","asterisk"],["type","text","id","name","formControlName","name","required","","placeholder","Introduce el nombre",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["for","firstLastName",1,"form-label","asterisk"],["type","text","id","firstLastName","formControlName","firstLastName","required","","placeholder","Introduce el primer apellido",1,"form-control",3,"ngClass"],["for","secondLastName",1,"form-label"],["type","text","id","secondLastName","formControlName","secondLastName","placeholder","Introduce el segundo apellido",1,"form-control"],["for","email",1,"form-label","asterisk"],["type","email","id","email","formControlName","email","required","","placeholder","Introduce el email",1,"form-control",3,"ngClass"],["for","phoneNumber",1,"form-label"],["type","text","id","phoneNumber","formControlName","phoneNumber","placeholder","Introduce el n\xFAmero de tel\xE9fono",1,"form-control",3,"ngClass"],["for","birthDate",1,"form-label"],["type","date","id","birthDate","formControlName","birthDate","placeholder","Introduce la fecha de nacimiento",1,"form-control"],[4,"ngIf"],["type","submit",1,"btn","btn-primary","float-end"],[1,"text-danger"],["for","trainer",1,"form-label"],["id","trainer","formControlName","trainer",1,"form-select"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,e){if(a&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Editar cliente"),n(),r(4,"form",3),k("ngSubmit",function(){return e.onSubmit()}),r(5,"div",4)(6,"div",5)(7,"label",6),o(8,"Nombre"),n(),p(9,"input",7),c(10,se,2,0,"div",8),n()(),r(11,"div",4)(12,"div",5)(13,"label",9),o(14,"Primer apellido"),n(),p(15,"input",10),c(16,ce,2,0,"div",8),n(),r(17,"div",5)(18,"label",11),o(19,"Segundo apellido"),n(),p(20,"input",12),n()(),r(21,"div",4)(22,"div",5)(23,"label",13),o(24,"Email"),n(),p(25,"input",14),c(26,pe,2,0,"div",8),n(),r(27,"div",5)(28,"label",15),o(29,"N\xFAmero de tel\xE9fono"),n(),p(30,"input",16),c(31,fe,2,0,"div",8),n()(),r(32,"div",4)(33,"div",5)(34,"label",17),o(35,"Fecha de nacimiento"),n(),p(36,"input",18),n(),c(37,ge,8,1,"ng-container",19),$(38,"async"),n(),r(39,"button",20),o(40,"Editar"),n()()()()),a&2){let s,h,d,C,N,E,_,S;m(4),u("formGroup",e.clientForm),m(5),u("ngClass",v(12,L,(e.clientForm==null||(s=e.clientForm.get("name"))==null?null:s.invalid)&&(e.clientForm==null||(s=e.clientForm.get("name"))==null?null:s.touched))),m(),u("ngIf",(e.clientForm==null||(h=e.clientForm.get("name"))==null?null:h.invalid)&&(e.clientForm==null||(h=e.clientForm.get("name"))==null?null:h.touched)),m(5),u("ngClass",v(14,L,(e.clientForm==null||(d=e.clientForm.get("firstLastName"))==null?null:d.invalid)&&(e.clientForm==null||(d=e.clientForm.get("firstLastName"))==null?null:d.touched))),m(),u("ngIf",(e.clientForm==null||(C=e.clientForm.get("firstLastName"))==null?null:C.invalid)&&(e.clientForm==null||(C=e.clientForm.get("firstLastName"))==null?null:C.touched)),m(9),u("ngClass",v(16,L,(e.clientForm==null||(N=e.clientForm.get("email"))==null?null:N.invalid)&&(e.clientForm==null||(N=e.clientForm.get("email"))==null?null:N.touched))),m(),u("ngIf",(e.clientForm==null||(E=e.clientForm.get("email"))==null?null:E.invalid)&&(e.clientForm==null||(E=e.clientForm.get("email"))==null?null:E.touched)),m(4),u("ngClass",v(18,L,(e.clientForm==null||(_=e.clientForm.get("phoneNumber"))==null?null:_.invalid)&&(e.clientForm==null||(_=e.clientForm.get("phoneNumber"))==null?null:_.touched))),m(),u("ngIf",(e.clientForm==null||(S=e.clientForm.get("phoneNumber"))==null?null:S.invalid)&&(e.clientForm==null||(S=e.clientForm.get("phoneNumber"))==null?null:S.touched)),m(6),u("ngIf",P(38,10,e.trainers$))}},dependencies:[B,z,H,Y,te,ie,U,ee,W,X,ne,Z,x,J],styles:["button[_ngcontent-%COMP%]{width:100%;background-color:#39d1ac;border:none}button[_ngcontent-%COMP%]:hover{background-color:#2ba98a}@media (min-width: 768px){button[_ngcontent-%COMP%]{width:200px}}"]});let i=t;return i})();var ve=[{path:"",component:ue}],de=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=D({type:t}),t.\u0275inj=y({imports:[F.forChild(ve),F]});let i=t;return i})();var ke=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=D({type:t}),t.\u0275inj=y({imports:[K,re,F,de]});let i=t;return i})();export{ke as EditClientModule};
