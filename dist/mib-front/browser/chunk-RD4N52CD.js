import{a as ne}from"./chunk-XFPBWLV3.js";import{a as re}from"./chunk-JXNFZ6DQ.js";import{b as z,c as C,d as H,e as J,h as K,i as Q,j as W,k as X,l as Y,m as Z,n as x,o as ee,p as te,r as ie}from"./chunk-H6VHFWHS.js";import"./chunk-5XHJ4X6E.js";import{C as j,Da as o,E as k,Ea as O,G as A,L as N,La as F,Q as T,R as M,Sa as G,Xa as L,Za as P,ab as B,ba as l,ca as h,d as D,f as U,ib as $,ja as v,la as m,mb as b,o as V,pa as n,qa as r,ra as g,va as q}from"./chunk-TI73ILXT.js";var R=i=>({"is-invalid":i});function de(i,t){i&1&&(n(0,"div",21),o(1," La tarifa es obligatoria "),r())}function se(i,t){i&1&&(n(0,"div",21),o(1," El precio es obligatorio "),r())}function pe(i,t){i&1&&(n(0,"div",21),o(1," La duraci\xF3n es obligatoria "),r())}function ce(i,t){i&1&&(n(0,"div",21),o(1," La duraci\xF3n es obligatoria "),r())}var le=(()=>{var t,ae,s,me;let p=class p{constructor(a,u,e,d,c){D(this,t);D(this,s);this.fb=a,this.ratesService=u,this.cdr=e,this.route=d,this.alertService=c,this.durationUnit="Month",this.rateId=null,this.rate$=this.route.paramMap.pipe(k(f=>(this.rateId=f.get("id"),this.rateId!==null?this.ratesService.getRateById(+this.rateId):V(null)))),this.rateForm=this.fb.group({name:[null,C.required],description:[null],price:[null,C.required],duration:[null,C.required],durationUnit:[null,C.required]})}ngOnInit(){this.rateForm.get("durationUnit")?.setValue("Month"),this.rateForm.get("durationUnit")?.valueChanges.subscribe(a=>{this.durationUnit=a}),this.setRateData(),this.cdr.detectChanges()}setRateData(){this.rate$.pipe(j()).subscribe(a=>{a&&this.rateForm.patchValue(a.data)})}onSubmit(){U(this,t,ae).call(this)||U(this,s,me).call(this,this.rateId,this.rateForm.getRawValue())}};t=new WeakSet,ae=function(){return this.rateForm.invalid?(this.rateForm.markAllAsTouched(),!0):!1},s=new WeakSet,me=function(a,u){this.ratesService.updateRate(Number(a),u).pipe(j(),A(e=>this.alertService.show(e.message,"success"))).subscribe()},p.\u0275fac=function(u){return new(u||p)(h(te),h(re),h(G),h($),h(ne))},p.\u0275cmp=T({type:p,selectors:[["app-edit-rates"]],decls:38,vars:18,consts:[[1,"container","mt-3"],[2,"height","85vh","overflow-y","auto","overflow-x","hidden"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-md-6","mb-3"],["for","name",1,"form-label","asterisk"],["type","text","id","name","formControlName","name","required","","placeholder","Introduce la tarifa",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["for","price",1,"form-label","asterisk"],["type","number","id","price","formControlName","price","required","","placeholder","Introduce el precio (\u20AC)",1,"form-control",3,"ngClass"],[1,"col-12","col-md-12","mb-3"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description","rows","3","placeholder","Introduce la description",1,"form-control"],["for","durationUnit",1,"form-label","asterisk"],["id","durationUnit","formControlName","durationUnit",1,"form-select",3,"ngClass"],["value","Month","selected",""],["value","Day"],["for","duration",1,"form-label","asterisk"],["type","number","id","duration","formControlName","duration","placeholder","Duraci\xF3n",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary","float-end"],[1,"text-danger"]],template:function(u,e){if(u&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Editar tarifa"),r(),n(4,"form",3),q("ngSubmit",function(){return e.onSubmit()}),n(5,"div",4)(6,"div",5)(7,"label",6),o(8,"Tarifa"),r(),g(9,"input",7),v(10,de,2,0,"div",8),r(),n(11,"div",5)(12,"label",9),o(13,"Precio"),r(),g(14,"input",10),v(15,se,2,0,"div",8),r()(),n(16,"div",4)(17,"div",11)(18,"label",12),o(19,"Descripcion"),r(),g(20,"textarea",13),r()(),n(21,"div",4)(22,"div",5)(23,"label",14),o(24,"Duracion"),r(),n(25,"select",15)(26,"option",16),o(27,"Meses"),r(),n(28,"option",17),o(29,"Dias"),r()(),v(30,pe,2,0,"div",8),r(),n(31,"div",5)(32,"label",18),o(33),r(),g(34,"input",19),v(35,ce,2,0,"div",8),r()(),n(36,"button",20),o(37,"Crear tarifa"),r()()()()),u&2){let d,c,f,S,_,y,I,E;l(4),m("formGroup",e.rateForm),l(5),m("ngClass",F(10,R,(e.rateForm==null||(d=e.rateForm.get("name"))==null?null:d.invalid)&&(e.rateForm==null||(d=e.rateForm.get("name"))==null?null:d.touched))),l(),m("ngIf",(e.rateForm==null||(c=e.rateForm.get("name"))==null?null:c.invalid)&&(e.rateForm==null||(c=e.rateForm.get("name"))==null?null:c.touched)),l(4),m("ngClass",F(12,R,(e.rateForm==null||(f=e.rateForm.get("price"))==null?null:f.invalid)&&(e.rateForm==null||(f=e.rateForm.get("price"))==null?null:f.touched))),l(),m("ngIf",(e.rateForm==null||(S=e.rateForm.get("price"))==null?null:S.invalid)&&(e.rateForm==null||(S=e.rateForm.get("price"))==null?null:S.touched)),l(10),m("ngClass",F(14,R,(e.rateForm==null||(_=e.rateForm.get("durationUnit"))==null?null:_.invalid)&&(e.rateForm==null||(_=e.rateForm.get("durationUnit"))==null?null:_.touched))),l(5),m("ngIf",(e.rateForm==null||(y=e.rateForm.get("durationUnit"))==null?null:y.invalid)&&(e.rateForm==null||(y=e.rateForm.get("durationUnit"))==null?null:y.touched)),l(3),O(e.durationUnit==="Month"?"Meses":"Dias"),l(),m("ngClass",F(16,R,(e.rateForm==null||(I=e.rateForm.get("duration"))==null?null:I.invalid)&&(e.rateForm==null||(I=e.rateForm.get("duration"))==null?null:I.touched))),l(),m("ngIf",(e.rateForm==null||(E=e.rateForm.get("duration"))==null?null:E.invalid)&&(e.rateForm==null||(E=e.rateForm.get("duration"))==null?null:E.touched))}},dependencies:[L,P,K,Z,x,z,Q,Y,H,J,ee,W,X],styles:["button[_ngcontent-%COMP%]{width:100%;background-color:#39d1ac;border:none}button[_ngcontent-%COMP%]:hover{background-color:#2ba98a}@media (min-width: 768px){button[_ngcontent-%COMP%]{width:200px}}"]});let i=p;return i})();var fe=[{path:"",component:le}],ue=(()=>{let t=class t{};t.\u0275fac=function(w){return new(w||t)},t.\u0275mod=M({type:t}),t.\u0275inj=N({imports:[b.forChild(fe),b]});let i=t;return i})();var ke=(()=>{let t=class t{};t.\u0275fac=function(w){return new(w||t)},t.\u0275mod=M({type:t}),t.\u0275inj=N({imports:[B,ie,b,ue]});let i=t;return i})();export{ke as EditRatesModule};
